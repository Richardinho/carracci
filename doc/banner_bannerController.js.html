<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: banner/bannerController.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: banner/bannerController.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>define([
    "BaseType",
    'utility/svg',
    "events/eventsBus"
    ],

    function (
        BaseType,
        paper,
        events
    ) {

    "use strict";

        /*

        todo: Some explanation of what this does please!
         */


    return BaseType.extend(
        /** @lends BannerController.prototype */
    {

        /**
         *
         *
         * @augments external:BaseType
         * @constructs
         */
        initialize : function (options) {

            this.artifactType = "banner";

            this.model = options.model;
            this.view = options.view;

            this.proxyEl = this._createProxyEl();

            this.proxyEl.dblclick(function () {

                events.trigger("dblclick:banner", this.model);


            }, this);

            events.on("destroy", this.onGlobalDestroy, this);

            this.model.on("destroy", this.destroy, this);
        },

        _createProxyEl : function () {

            var rect = paper.rect(this.model.getXCood(), this.model.getYCood(), this.model.getWidth(), this.model.height);
            rect.attr({ fill : "red", opacity : 0 });
            this._dragger(rect);
            return rect;

        },

        onGlobalDestroy : function () {

            this.model.trigger('destroy');
        },

        destroy : function () {

           this.proxyEl.remove();

        },

        _dragger : function dragger(c) {



           var startX, startY;

           function onMove (dx, dy) {
               var x = startX + dx;
               var y = startY + dy;

               c.attr({

                   x : x,
                   y : y

               });

               this.model.setCoods(x, y);

           }

           function onStart () {
               startX = parseInt(c.attr("x"));
               startY = parseInt(c.attr("y"));
           }
           function onEnd () {
               startX = null;
               startY = null;
           }

           c.drag($.proxy(onMove, this), onStart, onEnd);
           c.attr('cursor', 'move');

       }

    });
});

</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="BannerController.html">BannerController</a></li><li><a href="BannerEditor.html">BannerEditor</a></li><li><a href="DiagramModel.html">DiagramModel</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.3.2</a> on Wed Jun 17 2015 09:35:48 GMT+0100 (BST)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
